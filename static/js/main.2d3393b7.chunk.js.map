{"version":3,"sources":["client/ImagesFinder/components/ImageGalleryItem/ImageGalleryItem.module.css","client/ImagesFinder/components/Modal/Modal.module.css","client/ImagesFinder/components/ImageGallery/ImageGallery.module.css","client/ImagesFinder/components/Button/Button.module.css","client/ImagesFinder/components/Loader/Loader.module.css","client/ImagesFinder/components/ErrorMessage/ErrorMessage.module.css","App.module.css","client/ImagesFinder/components/Searchbar/Searchbar.module.css","client/ImagesFinder/components/ImageGalleryItem/ImageGalleryItem.jsx","client/ImagesFinder/components/ImageGallery/ImageGallery.jsx","shared/hooks/useForm.js","client/ImagesFinder/components/Searchbar/initialState.js","client/ImagesFinder/components/Searchbar/Searchbar.jsx","client/ImagesFinder/components/Button/Button.jsx","client/ImagesFinder/components/Loader/Loader.jsx","client/ImagesFinder/components/ErrorMessage/ErrorMessage.jsx","client/ImagesFinder/components/Modal/Modal.jsx","client/ImagesFinder/ImagesFinder.jsx","App.js","index.js"],"names":["module","exports","ImageGalleryItem","webformatURL","largeImageURL","tags","onClick","className","styles","imageGalleryItem","src","alt","imageGalleryItemImage","data-source","memo","defaultProps","ImageGallery","images","imagesElement","map","id","image","imageGallery","useForm","initialState","onSubmit","useState","formData","setFormData","target","name","value","e","preventDefault","query","Searchbar","data","handleChange","handleSubmit","searchbar","searchForm","type","searchFormButton","searchFormButtonLabel","searchFormInput","onChange","placeholder","autoComplete","Button","children","button","LoaderComponent","wrapper","color","height","width","timeout","ErrorMessage","text","error","modalRoot","document","querySelector","Modal","onClose","useEffect","window","addEventListener","code","removeEventListener","currentTarget","createPortal","overlay","modal","axios","defaults","baseURL","ImagesFinder","setImages","loading","setLoading","setError","page","setPage","searchQuery","setSearchQuery","showModal","setShowModal","activeImg","setActiveImg","listRef","useRef","console","log","a","url","get","hits","fetchImages","toggleModal","ref","Loader","length","App","app","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2d3393b7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__IWGhM\",\"imageGalleryItemImage\":\"ImageGalleryItem_imageGalleryItemImage__3FP1h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1EBYW\",\"modal\":\"Modal_modal__3OkE1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__31quU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__1Y1WX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Loader_wrapper__21e7K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"ErrorMessage_error__1WEbR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__1VDBy\",\"searchForm\":\"Searchbar_searchForm__1bw2f\",\"searchFormButton\":\"Searchbar_searchFormButton__2tXNF\",\"searchFormButtonLabel\":\"Searchbar_searchFormButtonLabel__2FRyr\",\"searchFormInput\":\"Searchbar_searchFormInput__Khc6Q\"};","import {memo} from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport styles from './ImageGalleryItem.module.css'\n\nfunction ImageGalleryItem({webformatURL,largeImageURL,tags, onClick}) {\n    return (\n        <li className={styles.imageGalleryItem}>\n            <img src={webformatURL}\n                alt={tags}\n                className={styles.imageGalleryItemImage}\n                data-source={largeImageURL}\n                onClick={() => onClick(largeImageURL)}\n            />\n        </li>)\n};\n\nexport default memo(ImageGalleryItem);\n\nImageGalleryItem.defaultProps = {\n    tags: '',\n}\n\nImageGalleryItem.propTypes = {\n    webformatURL: PropTypes.string.isRequired,\n    largeImageURL: PropTypes.string.isRequired,\n    tags: PropTypes.string\n}\n\n\n","import {memo} from 'react';\nimport PropTypes from 'prop-types';\n\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem'\n\n\nimport styles from './ImageGallery.module.css'\n\nfunction ImageGallery({ images, onClick}) {\n    const imagesElement = images.map(({id, ...image}) => (\n        <ImageGalleryItem key={id} {...image} onClick={onClick}/>))\n    return (\n        <ul className={styles.imageGallery}>\n            {imagesElement}\n        </ul>\n    )\n};\n\nexport default memo(ImageGallery);\n\nImageGallery.defaultProps = {\n    images: [],\n}\n\n\nImageGallery.propTypes = {\n    images: PropTypes.array,\n  }\n","import { useState } from 'react';\n\nconst useForm = ({ initialState, onSubmit = () => {} }) => {\n  const [formData, setFormData] = useState(initialState);\n\n  const handleChange = ({ target }) => {\n    const { name, value } = target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSubmit(formData);\n    setFormData(initialState);\n  };\n\n  return [formData, setFormData, handleChange, handleSubmit];\n};\n\nexport default useForm;\n","export const initialState = {\n  query: '',\n};\n","import { useState, memo } from 'react';\n\n\nimport useForm from '../../../../shared/hooks/useForm'\nimport {initialState} from './initialState'\n\n\nimport styles from './Searchbar.module.css'\n\n\nconst Searchbar = ({onSubmit}) => {\n\n    const [data, , handleChange, handleSubmit] = useForm({ initialState, onSubmit });\n    \n    return (\n            <header className={styles.searchbar}>\n                <form className={styles.searchForm} onSubmit={handleSubmit}>\n                    <button type=\"submit\" className={styles.searchFormButton}>\n                        <span className={styles.searchFormButtonLabel}>Search</span>\n                    </button>\n                    <input\n                        className={styles.searchFormInput}\n                        type=\"text\"\n                        name=\"query\"\n                        value={data.query}\n                        onChange={handleChange}\n                        placeholder=\"Search images and photos\"\n                        autoComplete=\"off\"\n                    />\n                </form>\n            </header>\n        )\n\n}\n\nexport default memo(Searchbar)\n\n","import {memo} from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport styles from './Button.module.css'\n\nfunction Button({ onClick, children }) {\n    return <button onClick={onClick} className={styles.button}>{children}</button>\n};\n\nexport default memo(Button);\n\nButton.propTypes = {\n    onClick: PropTypes.func.isRequired,\n}\n\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport styles from './Loader.module.css';\n\nfunction LoaderComponent() {\n  return (\n    <div className={styles.wrapper}>\n      <Loader\n        type=\"ThreeDots\"\n        color=\"#3f51b5\"\n        height={80}\n        width={80}\n        timeout={3000}\n      />\n    </div>\n  );\n}\n\nexport default LoaderComponent;","import {memo} from 'react';\n\nimport styles from './ErrorMessage.module.css'\n\nimport PropTypes from 'prop-types';\n\nfunction ErrorMessage({text}) {\n    return <p className={styles.error}>{text}</p>\n        \n};\n\nexport default memo(ErrorMessage);\n\nErrorMessage.propTypes ={\n    text: PropTypes.string.isRequired\n}\n\n","\nimport { useEffect, memo } from 'react';\nimport { createPortal } from 'react-dom';\n\n\n\nimport styles from './Modal.module.css'\n\nconst modalRoot = document.querySelector('#modal-root')\n\n\nconst Modal = ({ children, onClose }) => {\n\nuseEffect(() => {\n    window.addEventListener('keydown', function (e) {\n         if (e.code === \"Escape\") {\n            onClose()\n        }\n    })\n    return window.removeEventListener('keydown', function (e) {\n        if (e.currentTarget === e.target) {\n      onClose();\n    }\n    })\n    \n}, [])\n\n    const handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      onClose();\n    }\n  };\n\n\n\n     return createPortal(\n            <div className={styles.overlay} onClick={handleBackdropClick}>\n                <div className={ styles.modal}>{children}</div>\n            </div>,\n            modalRoot\n        )\n\n    \n}\n\nexport default memo(Modal)\n","\nimport { useState, useEffect , useRef} from \"react\";\nimport axios from 'axios';\n\nimport ImageGallery from './components/ImageGallery';\nimport Searchbar from './components/Searchbar';\nimport Button from './components/Button';\nimport Loader from './components/Loader';\nimport ErrorMessage from './components/ErrorMessage';\nimport Modal from './components/Modal';\n\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\n\nconst ImagesFinder = () => {\n\n  \n  const [images, setImages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const [searchQuery, setSearchQuery] = useState('')\n  const [showModal, setShowModal] = useState(false)\n  const [activeImg, setActiveImg] = useState('')\n  \n  const listRef = useRef();\n  console.log(listRef);\n\n  useEffect(() => {\n    const fetchImages = async () => {\n            try{\n                const url = `/api/?q=${searchQuery}&page=${page}&key=20930495-600a23973a3be0872b747cdc1&image_type=photo&orientation=horizontal&per_page=12`;\n              const { data } = await axios.get(url);\n              setLoading(false);\n              setImages([...images, ...data.hits]);\n              \n            }\n            catch(error){\n                setError(error)\n            }\n        }\n        if(loading){\n            fetchImages();\n        }\n\n  }, [searchQuery, page])\n\n  //  if(loading) {\n  //       return <p>...Loading</p>\n  //   }\n\n  //   if(error){\n  //       return <p>...Something was wrong</p>\n  //   }\n\n  const loadMore = () => {\n        const prevPage=page\n        setPage(prevPage+1)\n        setLoading(true);\n    }\n\n  const onChangeQuery = ({ query })=> {\n    setSearchQuery(query);\n    setImages([])\n    setPage(1)\n    setLoading(true)\n    setError(null)\n  };\n\n\n  const toggleModal = (src) => {\n    setShowModal(!showModal)\n    setActiveImg(src)\n  };\n\n  return (\n    \n      <>\n        {showModal && <Modal onClose={toggleModal}>\n          <img src={activeImg} alt=\"\"/>\n        </Modal>}\n\n        <Searchbar onSubmit={onChangeQuery} />\n\n        {error && <ErrorMessage text={error} />}\n        \n        <div ref={listRef}>\n      <ImageGallery images={images} onClick={toggleModal}/>\n      \n        </div>\n        \n        {loading && <Loader />}\n\n      {images.length > 0 && !loading && <Button onClick={loadMore}>Load more</Button>}\n      </>\n    );\n}\n\n\nexport default ImagesFinder\n\n// class ImagesFinder extends Component {\n//   state = { ...initialState };\n  \n//   listRef = createRef();\n\n//   componentDidMount() {\n//     const {loading }=this.state\n//     this.setState({ loading: true })\n//     if (loading) {\n//       this.fetchImages();\n//     } \n//   }\n\n//   getSnapshotBeforeUpdate(prevProps, prevState) {\n//     if (prevState.hits.length < this.state.hits.length) {\n//       const { current } = this.listRef;\n//       return current.scrollHeight\n//     }\n//     return null\n//   }\n\n//   componentDidUpdate(prevProps, prevState, snapshot) {\n//     const { loading } = this.state\n  \n//     if (loading) {\n//       this.fetchImages();\n//     }\n//     if (snapshot !== null) {\n//       window.scrollTo({\n//         top: snapshot,\n//         behavior: 'smooth',\n//       });\n//     }      \n//   }\n\n  // onChangeQuery = query => {\n  //   this.setState({ searchQuery: query, page: 1, hits: [], error: null, loading:true });\n  // };\n\n//   fetchImages = () => {\n//     const { page, searchQuery } = this.state;\n//     const options = {\n//       searchQuery,\n//       page,\n//     };\n\n//     apiService\n//       .fetchImages(options)\n//       .then(hits => {\n//         if (!hits.length) {\n//           this.setState({\n//             error: `No matches found for your request - ${searchQuery}!`,\n//           });\n//         }\n//         this.setState(prevState => ({\n//           hits: [...prevState.hits, ...hits],\n//           page: prevState.page + 1,\n//           loading: false\n//         }));\n//       })\n//       .catch(error =>\n//         this.setState({ error: `Something went wrong. Try again!` }),\n//       )\n//       .finally(() => this.setState({ loading: false }));\n    \n  \n//   };\n\n//   toggleModal = (src) => {\n//     this.setState(({ showModal}) => ({\n//       showModal: !showModal,\n//       activeImg: src\n\n//     }));\n//   };\n  \n//   render() {\n//     const { hits, loading, error, showModal, activeImg } = this.state;\n\n//     const { onChangeQuery, fetchImages , listRef, toggleModal} = this;\n//     return (\n//       <>\n//         {showModal && <Modal onClose={toggleModal}>\n//           <img src={activeImg} alt=\"\"/>\n//         </Modal>}\n\n//         <Searchbar onSubmit={onChangeQuery} />\n\n//         {error && <ErrorMessage text={error} />}\n        \n//         <div ref={listRef}>\n//           <ImageGallery images={hits} onClick={toggleModal}/>\n//         </div>\n        \n//         {loading && <Loader />}\n\n//         {hits.length > 0 && !loading && <Button onClick={fetchImages}>Load more</Button>}\n//       </>\n//     );\n//   }\n// }\n\n// export default ImagesFinder;","import ImagesFinder from './client/ImagesFinder/ImagesFinder';\n\nimport styles from './App.module.css';\n\nfunction App() {\n  return (\n    <div className={styles.app}>\n      <ImagesFinder />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}